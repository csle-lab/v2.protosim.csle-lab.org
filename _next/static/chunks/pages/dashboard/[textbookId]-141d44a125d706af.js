(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64],{6941:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/[textbookId]",function(){return r(6693)}])},6693:function(e,s,r){"use strict";r.r(s),r.d(s,{__N_SSG:function(){return u}});var a=r(5893);r(4005);var t=r(9008),n=r.n(t),l=r(7294),i=r(7029),o=r(9211),c=r(9186),d=r(8432),m=r.n(d),u=!0;s.default=e=>{let{textbookId:s}=e,[r,t]=(0,l.useState)({});(0,l.useEffect)(()=>{d(),setInterval(d,5e3)},[]);let d=async()=>{t(await (0,o.f)())},{isInstructor:u}=(0,o.Pc)();if(!u)return null;let _=(0,c.M)("app");if(null==_)throw"App not found";let g=_.textbooks.find(e=>e.id==s);if(null==g)throw"Textbook ".concat(s," not found");let b="".concat(g.titleJa," | ProtoSim");return(0,a.jsxs)(i.Z,{href:"../",children:[(0,a.jsx)(n(),{children:(0,a.jsx)("title",{children:b})}),(0,a.jsxs)("main",{className:"container-fluid mt-4",children:[(0,a.jsxs)("h2",{children:["ダッシュボード ",">"," ",g.titleJa]}),(0,a.jsxs)("table",{className:"table "+m().table,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:m().headerRow+" "+m().username,children:"ユーザ名"}),g.pages.map(e=>"separator"===e.iconType?null:(0,a.jsx)(h,{page:e},e.id))]})}),(0,a.jsx)("tbody",{children:Object.entries(r).map(e=>{let[s,r]=e;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"row",className:m().username,children:r.displayName}),g.pages.map(e=>"separator"===e.iconType?null:(0,a.jsx)(p,{page:e,user:r},e.id))]},s)})})]})]})]})};let h=e=>{let{page:s}=e;return(0,a.jsx)("th",{scope:"col",className:m().headerRow,children:s.titleJa})},p=e=>{let{page:s,user:r}=e,t="true"===r.memories["pageCompleted_".concat(s.id)],n=null!=r.memories.currentPage&&JSON.parse(r.memories.currentPage).pageId===s.id&&new Date().getTime()-JSON.parse(r.memories.currentPage).timestamp<=1e4;return(console.log(new Date().getTime()),console.log(JSON.parse(r.memories.currentPage).timestamp),console.log(new Date().getTime()-JSON.parse(r.memories.currentPage).timestamp),console.log(null!=r.memories.currentPage,JSON.parse(r.memories.currentPage).pageId===s.id,new Date().getTime()-JSON.parse(r.memories.currentPage).timestamp<=1e4,n),console.log(JSON.parse(r.memories.currentPage).pageId,s.id),0===s.missionKeys.length)?(0,a.jsx)("td",{className:m().cell,children:(0,a.jsx)("div",{className:m().missions,children:(0,a.jsx)("div",{style:{background:t?"var(--bs-success-bg-subtle)":"none"},children:t&&"✓"})})}):(0,a.jsx)("td",{className:m().cell+" "+(n?m().viewed:""),children:(0,a.jsx)("div",{className:m().missions,children:s.missionKeys.map(e=>{let s="true"===r.memories["mission_".concat(e)];return(0,a.jsx)("div",{style:{background:s?"var(--bs-success-bg-subtle)":"none"},children:s&&"✓"},e)})})})}},4005:function(){},8432:function(e){e.exports={table:"Dashboard_table__6l68Z",headerRow:"Dashboard_headerRow__yTHlN",username:"Dashboard_username__gBuel",cell:"Dashboard_cell__6UDC1",missions:"Dashboard_missions__UE52K",viewed:"Dashboard_viewed__LMmqd"}}},function(e){e.O(0,[219,720,162,971,888,774,179],function(){return e(e.s=6941)}),_N_E=e.O()}]);