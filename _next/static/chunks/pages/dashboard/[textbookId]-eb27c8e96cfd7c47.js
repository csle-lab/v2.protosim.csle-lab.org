(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64],{6941:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/[textbookId]",function(){return n(6693)}])},6693:function(e,s,n){"use strict";n.r(s),n.d(s,{__N_SSG:function(){return h}});var t=n(5893);n(4005);var a=n(9008),r=n.n(a),l=n(7294),i=n(7029),c=n(9211),o=n(3712),d=n(8432),u=n.n(d),h=!0;s.default=e=>{let{textbookId:s}=e,[n,a]=(0,l.useState)({});(0,l.useEffect)(()=>{d(),setInterval(d,5e3)},[]);let d=async()=>{a(await (0,c.f)())},{isInstructor:h}=(0,c.Pc)();if(!h)return null;let p=(0,o.M)("app");if(null==p)throw"App not found";let b=p.textbooks.find(e=>e.id==s);if(null==b)throw"Textbook ".concat(s," not found");let x="".concat(b.titleJa," | ProtoSim");return(0,t.jsxs)(i.Z,{href:"../",children:[(0,t.jsx)(r(),{children:(0,t.jsx)("title",{children:x})}),(0,t.jsxs)("main",{className:"container-fluid mt-4",children:[(0,t.jsxs)("h2",{children:["ダッシュボード ",">"," ",b.titleJa]}),(0,t.jsxs)("table",{className:"table "+u().table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:u().headerRow+" "+u().username,children:"ユーザ名"}),b.pages.map(e=>"separator"===e.iconType?null:(0,t.jsx)(m,{page:e},e.id))]})}),(0,t.jsx)("tbody",{children:Object.entries(n).map(e=>{let[s,n]=e;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"row",className:u().username,children:n.displayName}),b.pages.map(e=>"separator"===e.iconType?null:(0,t.jsx)(_,{page:e,user:n},e.id))]},s)})})]})]})]})};let m=e=>{let{page:s}=e;return(0,t.jsx)("th",{scope:"col",className:u().headerRow,children:s.titleJa})},_=e=>{let{page:s,user:n}=e,a="true"===n.memories["pageCompleted_".concat(s.id)],r=null!=n.memories.currentPage&&JSON.parse(n.memories.currentPage).pageId===s.id&&new Date().getTime()-JSON.parse(n.memories.currentPage).timestamp<=1e4;return 0===s.missionKeys.length?(0,t.jsx)("td",{className:u().cell,children:(0,t.jsx)("div",{className:u().missions,children:(0,t.jsx)("div",{style:{background:a?"var(--bs-success-bg-subtle)":"none"},children:a&&"✓"})})}):(0,t.jsx)("td",{className:u().cell+" "+(r?u().viewed:""),children:(0,t.jsx)("div",{className:u().missions,children:s.missionKeys.map(e=>{let s="true"===n.memories["mission_".concat(e)];return(0,t.jsx)("div",{style:{background:s?"var(--bs-success-bg-subtle)":"none"},children:s&&"✓"},e)})})})}},4005:function(){},8432:function(e){e.exports={table:"Dashboard_table__6l68Z",headerRow:"Dashboard_headerRow__yTHlN",username:"Dashboard_username__gBuel",cell:"Dashboard_cell__6UDC1",missions:"Dashboard_missions__UE52K",viewed:"Dashboard_viewed__LMmqd"}}},function(e){e.O(0,[219,309,866,726,888,774,179],function(){return e(e.s=6941)}),_N_E=e.O()}]);